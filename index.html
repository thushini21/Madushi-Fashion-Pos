<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madushi Fashion Pos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>

        #login-section {
            display: block;
        }

        #main-section {
            display: none;
        }


        body{
            background: #000;
        }

        #login-card{
            background: url("https://i.pinimg.com/736x/f9/35/b3/f935b36c9b66e3f65d4fe5a18ca52af2.jpg");
            background-size: cover;
            background-repeat: no-repeat;
            min-height: 90vh;
            gap: 5rem;
        }

        .tag{
            color: white;
            font-family: Consolas;
            font-size: 3rem;
        }

        label{
            color: white;
        }

        #main-section{
            background:url("https://i.pinimg.com/736x/8c/9d/6f/8c9d6f02feb085c963da2da82a038cb4.jpg");
            min-height: 100vh;
        }

        .card{
            background: rgba(0,0,0,0.4);
            box-shadow: 0 2px 15px rgba(256, 256, 256, 0.25);
        }

        .card-header{
            color: white;
        }

        .card-text{
            color: gold;
            font-weight: bold;
        }

        h3{
            color: white;
        }
        .form-control,.form-select{
            background: rgba(256, 256, 256, 0.6);
            box-shadow: 0 2px 15px rgba(256, 256, 256, 0.25);
        }

    </style>


</head>
<body><!------------------------------------------ Login Section ----------------------------------------------------->

<div id="login-section" class=" container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-4">
            <div id="login-card" class="card">
                <div class="card-header text-center">
                    <h3 class="tag">Login Form</h3>
                </div>
                <div class="card-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="username" placeholder="Enter your username" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" placeholder="Enter your password" required>
                        </div>
                        <button type="submit" class="btn btn-warning w-100 " style="margin:3vw 0">Login</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!---------------------------------------- Main Section -------------------------------------->

<div id="main-section">

    <!-------------------------------------------- Navbar ------------------------------------------------>

    <nav class="navbar navbar-expand-lg fw-bolder bg-warning">
        <div class="container-fluid">
            <a class="navbar-brand" style="font-size: 2rem"> MADHUSHI CLOSET üå∏üëó</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <span id="dashboard-nav" class="nav-link">Dashboard</span>
                    </li>
                    <li class="nav-item">
                        <span id="customer-nav" class="nav-link">Customer Manage</span>
                    </li>
                    <li class="nav-item">
                        <span id="item-nav" class="nav-link">Item Manage</span>
                    </li>
                    <li class="nav-item">
                        <span id="order-nav" class="nav-link">Place Order</span>
                    </li>
                    <li class="nav-item">
                        <span id="order-history-nav" class="nav-link">Order Manage</span>
                    </li>
                    <li class="nav-item">
                        <span id="log-out-nav" class="nav-link">Log Out</span>
                    </li>
                </ul>
            </div>
        </div>
    </nav>


    <!----------------------------------------- Dashboard -------------------------------------------------------->

    <div id="dashboard-section" class="container mt-4">
        <h1 class="text-center mb-4" style="color: #0e0a0a; font-weight: bold; margin: 5vw">Welcome to Fashion House üòÅ</h1>
        <h3 class="text-center mb-4" style="color: black; background: rgba(256, 256, 256, 0.5); margin: 5vw; border-radius: 10px"> Track sales, manage inventory, and style your customers with the latest fashion trends üëóüõçÔ∏è‚ú®!</h3>
        <div class="row" style="margin: 15vw 0vw">
            <div class="col-md-3 ">
                <div class="card text-white mb-3">
                    <div class="card-body">
                        <h5 class="card-title">Customers</h5>
                        <p class="card-text fs-2" id="customerCount">0</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-white mb-3">
                    <div class="card-body">
                        <h5 class="card-title">Items</h5>
                        <p class="card-text fs-2" id="itemCount">0</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-white mb-3">
                    <div class="card-body">
                        <h5 class="card-title">Orders</h5>
                        <p class="card-text fs-2" id="orderCount">0</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-white mb-3">
                    <div class="card-body">
                        <h5 class="card-title">Total Revenue</h5>
                        <p class="card-text fs-2" id="totalRevenue">0</p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!--------------------------------------- Customer Section ------------------------------------------------------>

    <div id="customer-section" class="container mt-5">
        <div class="card my-4">
            <div class="card-header">Manage Customer</div>
            <div class="card-body">
                <form id="customerForm">
                    <div class="col">
                        <label for="customerid" class="form-label">Customer Id</label>
                        <input type="text" class="form-control" id="customerid" readonly>
                    </div>
                    <div class="row mb-3">
                        <div class="col">
                            <label for="firstName" class="form-label">First Name</label>
                            <input type="text" class="form-control" id="firstName" placeholder="First Name" required>
                        </div>
                        <div class="col">
                            <label for="lastName" class="form-label">Last Name</label>
                            <input type="text" class="form-control" id="lastName" placeholder="Last Name" required>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col">
                            <label for="mobile" class="form-label">Mobile Number</label>
                            <input type="text" class="form-control" id="mobile" placeholder="Mobile Number" required>
                        </div>
                        <div class="col">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" placeholder="Email" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="address" class="form-label">Address</label>
                        <textarea class="form-control" id="address" rows="3" placeholder="Enter Address" required></textarea>
                    </div>
                    <button type="button" class="btn btn-warning w-100" id="add-customer-btn">Add Customer</button>
                </form>
            </div>
        </div>

        <div class="mb-3">
            <label for="customerSearch" class="form-label">Search Customers</label>
            <input type="text" class="form-control" id="customerSearch" placeholder="Search by name, email, or mobile number">
        </div>

        <h3>Customer List</h3>
        <div class="table-responsive">
            <table class="table table-bordered table-striped mt-3">
                <thead>
                <tr>
                    <th>Id</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Mobile</th>
                    <th>Email</th>
                    <th>Address</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody id="customerTableBody">
                </tbody>
            </table>
        </div>
    </div>


    <!--------------------------------------- Item Section ---------------------------------------------------------->

    <div id="item-section" class="container mt-5">
        <div class="card my-4">
            <div class="card-header">Manage Item</div>
            <div class="card-body">
                <form id="itemForm">
                    <div class="col">
                        <label for="itemid" class="form-label">Item Id</label>
                        <input type="text" class="form-control" id="itemid" readonly>
                    </div>
                    <div class="row mb-3">
                        <div class="col">
                            <label for="itemName" class="form-label">Item Name</label>
                            <input type="text" class="form-control" id="itemName" placeholder="Item Name" required>
                        </div>
                        <div class="col">
                            <label for="qty" class="form-label">Quantity</label>
                            <input type="number" class="form-control" id="qty" placeholder="Quantity" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="itemDescription" class="form-label">Item Description</label>
                        <textarea class="form-control" id="itemDescription" rows="3" placeholder="Enter Item Description" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="price" class="form-label">Price</label>
                        <input type="number" class="form-control" id="price" placeholder="Price" required>
                    </div>
                    <div class="mb-3">
                        <label for="itemImage" class="form-label">Item Image</label>
                        <input type="file" class="form-control" id="itemImage" accept="image/*" required>
                    </div>
                    <div class="mb-3" id="imagePreviewContainer" style="display: none;">
                        <img id="imagePreview" style="display: none; width: 100px; height: 100px; border: 2px solid black;" alt="Image Preview">
                    </div>
                    <button type="button" class="btn btn-warning w-100" id="add-item-btn">Add Item</button>
                </form>
            </div>
        </div>
        <div class="mb-3">
            <label for="itemSearch" class="form-label">Search Items</label>
            <input type="text" class="form-control" id="itemSearch" placeholder="Search by name or description">
        </div>

        <h3>Item List</h3>
        <div class="table-responsive">
            <table class="table table-bordered table-striped mt-3">
                <thead>
                <tr>
                    <th>Id</th>
                    <th>Item Name</th>
                    <th>Description</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Image</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="itemTableBody">
                </tbody>
            </table>
        </div>
    </div>

    <!--------------------------------------- Order Section --------------------------------------------------------->

    <div id="order-section" class="container mt-5">
        <div class="card my-4">
            <div class="card-header">Placed Order</div>
            <div class="card-body">
                <form id="orderForm">
                    <div class="col">
                        <label for="orderid" class="form-label">Order Id</label>
                        <input type="text" class="form-control" id="orderid" readonly>
                    </div>
                    <div class="row mb-3">
                        <div class="col">
                            <label for="customerSelect" class="form-label">Select Customer</label>
                            <select class="form-select" id="customerSelect" required>
                                <option selected disabled value="">Choose Customer</option>
                            </select>
                        </div>
                        <div class="col">
                            <label for="customerName" class="form-label">Customer Name</label>
                            <input type="text" class="form-control" id="customerName" disabled>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col">
                            <label for="itemSelect" class="form-label">Select Item</label>
                            <select class="form-select" id="itemSelect" required>
                                <option selected disabled value="">Choose an item</option>
                            </select>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <label for="quantityOnHand" class="form-label">Quantity on Hand</label>
                                <input type="text" class="form-control" id="quantityOnHand" disabled>
                            </div>
                            <div class="col">
                                <label for="date" class="form-label">Date</label>
                                <input type="date" class="form-control" id="date" disabled>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col">
                            <label for="itemImage2" class="form-label">Item Image</label>
                            <img id="itemImage2" src="" class="img-thumbnail" style="max-width: 100px;">
                        </div>
                        <div class="col">
                            <label for="unitPrice" class="form-label">Unit Price</label>
                            <input type="text" class="form-control" id="unitPrice" disabled>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="quantity" class="form-label">Quantity</label>
                        <input type="number" class="form-control" id="quantity" placeholder="Enter quantity" required>
                    </div>
                    <button type="button" class="btn btn-warning w-100" id="addorderbtn">Add to Cart</button>
                </form>
            </div>
        </div>
        <!------------------------- Cart  ----------------------------->
        <h3>Cart Details</h3>
        <div class="table-responsive">
            <table class="table table-bordered table-striped mt-3">
                <thead>
                <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Unit Price</th>
                    <th>Total</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="orderTableBody">
                </tbody>
            </table>
        </div>

        <div class="text-end mt-3">
            <h4 style="color: white; margin-top: 5vw;">Total: Rs. <span id="netTotal">0.00</span></h4>
        </div>

        <div class="text-end mt-3">
            <div class="row mb-3 justify-content-end">
                <div class="col-auto">
                    <div class="input-group">
                        <input type="text" class="form-control" id="discount" placeholder="Enter discount" required>
                        <span class="input-group-text">%</span>
                    </div>
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-warning" id="discountbtn">Apply Discount</button>
                </div>
            </div>
        </div>

        <div class="text-end mt-3">
            <h4 style="color: white;margin-top: 5vw;">Net Total: Rs. <span id="discountedTotal">0.00</span></h4>
        </div>

        <div class="text-end mt-3">
            <button class="btn btn-warning" id="placeOrderBtn" style="margin-bottom: 3vw;">Place Order</button>
        </div>

    </div>

    <!--------------------------------------- Order Details Section--------------------------------------------------->

    <div id="orderdetails-section" class="container mt-5">
        <div class="mb-3">
            <label for="itemSearch" class="form-label">Search Orders</label>
            <input type="text" class="form-control" id="orderSearch" placeholder="Search by CustomerName , Date or Price">
        </div>
        <h3>Order List</h3>
        <div class="table-responsive">
            <table class="table table-bordered table-striped mt-3">
                <thead>
                <tr>
                    <th>Order Id</th>
                    <th>Customer Name</th>
                    <th>Date</th>
                    <th>Price</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="orderdetailsTableBody">
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="./lib/jquery-3.7.1.min.js"></script>


<script type="module">
    import {customer_array,item_array,order_array} from "./db/database.js";
    import {totalRevenue} from "/controller/OrderController.js";

    $(document).ready(function () {

        $('#login-section').show();

        $('#customerCount').text(customer_array.length);
        $('#itemCount').text(item_array.length);
        $('#orderCount').text(order_array.length);
        $('#totalRevenue').text(`Rs. ${totalRevenue()}`);

        const today = new Date().toISOString().split('T')[0];
        $('#date').val(today);

        /*------------------------------------------------ Login Form --------------------------------------------------------------*/

        $('#loginForm').on('submit', function (e) {
            e.preventDefault();
            const username = $('#username').val();
            const password = $('#password').val();
            if (username === 'admin' && password === '1234') {
                $('#login-section').hide();
                $('#main-section').show();
            } else {
                Swal.fire({
                    title: "Oops!",
                    text: "Invalid credentials. Please try again",
                    icon: "error"
                });
            }
        });


        /*------------------------------------------------- Navigation --------------------------------------------------------------*/

        $('#customer-section, #item-section, #order-section, #orderdetails-section').hide();

        $('#dashboard-nav').on('click', function () {
            $('#dashboard-section').show();
            $('#customer-section, #item-section, #order-section, #orderdetails-section').hide();
        });

        $('#customer-nav').on('click', function () {
            $('#customer-section').show();
            $('#dashboard-section, #item-section, #order-section, #orderdetails-section').hide();
        });

        $('#item-nav').on('click', function () {
            $('#item-section').show();
            $('#dashboard-section, #customer-section, #order-section, #orderdetails-section').hide();
        });

        $('#order-nav').on('click', function () {
            $('#order-section').show();
            $('#dashboard-section, #customer-section, #item-section, #orderdetails-section').hide();
        });

        $('#order-history-nav').on('click', function () {
            $('#orderdetails-section').show();
            $('#dashboard-section, #customer-section, #item-section, #order-section').hide();
        });

        $('#log-out-nav').on('click', function () {
            $('#login-section').show();
            $('#main-section').hide();
            $('#username').val('');
            $('#password').val('');
        });
    });
</script>
<script type="module" src="controller/CustomerController.js"></script>
<script type="module" src="controller/ItemController.js"></script>
<script src="./lib/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script type="module" src="controller/OrderController.js"></script>
</body>
</html>